{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Provider Capability Matrix",
  "description": "Defines capabilities for each provider to enable intelligent routing",
  "version": "1.0.0",
  "providers": {
    "openai": {
      "priority": 10,
      "cost_per_1k_tokens": 0.02,
      "capabilities": {
        "streaming": true,
        "json_output": true,
        "tool_use": true,
        "vision": true,
        "responses_api": true,
        "function_calling": true,
        "structured_output": true
      },
      "models": {
        "gpt-4o": {
          "context_window": 128000,
          "max_output": 16384,
          "supports_vision": true,
          "supports_tools": true,
          "cost_input": 0.0025,
          "cost_output": 0.01
        },
        "gpt-4o-mini": {
          "context_window": 128000,
          "max_output": 16384,
          "supports_vision": true,
          "supports_tools": true,
          "cost_input": 0.00015,
          "cost_output": 0.0006
        },
        "o3-mini": {
          "context_window": 200000,
          "max_output": 100000,
          "supports_vision": false,
          "supports_tools": false,
          "cost_input": 0.001,
          "cost_output": 0.004,
          "reasoning_model": true
        }
      }
    },
    "anthropic": {
      "priority": 9,
      "cost_per_1k_tokens": 0.015,
      "capabilities": {
        "streaming": true,
        "json_output": true,
        "tool_use": true,
        "vision": true,
        "function_calling": true,
        "structured_output": true,
        "extended_thinking": true
      },
      "models": {
        "claude-3-5-sonnet-20241022": {
          "context_window": 200000,
          "max_output": 8192,
          "supports_vision": true,
          "supports_tools": true,
          "cost_input": 0.003,
          "cost_output": 0.015
        },
        "claude-3-5-haiku-20241022": {
          "context_window": 200000,
          "max_output": 8192,
          "supports_vision": false,
          "supports_tools": true,
          "cost_input": 0.0008,
          "cost_output": 0.004
        }
      }
    },
    "gemini": {
      "priority": 8,
      "cost_per_1k_tokens": 0.001,
      "capabilities": {
        "streaming": true,
        "json_output": true,
        "tool_use": true,
        "vision": true,
        "function_calling": true,
        "structured_output": true,
        "multimodal": true
      },
      "models": {
        "gemini-2.0-flash-exp": {
          "context_window": 1000000,
          "max_output": 8192,
          "supports_vision": true,
          "supports_tools": true,
          "cost_input": 0.0,
          "cost_output": 0.0,
          "experimental": true
        },
        "gemini-1.5-pro": {
          "context_window": 2000000,
          "max_output": 8192,
          "supports_vision": true,
          "supports_tools": true,
          "cost_input": 0.00125,
          "cost_output": 0.005
        }
      }
    },
    "ollama": {
      "priority": 5,
      "cost_per_1k_tokens": 0.0,
      "capabilities": {
        "streaming": true,
        "json_output": true,
        "tool_use": false,
        "vision": false,
        "local_execution": true,
        "offline_capable": true
      },
      "notes": "Local execution, model-dependent capabilities"
    },
    "deepseek": {
      "priority": 7,
      "cost_per_1k_tokens": 0.0002,
      "capabilities": {
        "streaming": true,
        "json_output": true,
        "tool_use": true,
        "vision": false,
        "function_calling": true,
        "structured_output": true,
        "reasoning": true
      }
    },
    "xai": {
      "priority": 7,
      "cost_per_1k_tokens": 0.002,
      "capabilities": {
        "streaming": true,
        "json_output": true,
        "tool_use": true,
        "vision": false,
        "function_calling": true,
        "structured_output": true
      }
    },
    "openrouter": {
      "priority": 6,
      "cost_per_1k_tokens": "variable",
      "capabilities": {
        "streaming": true,
        "json_output": true,
        "tool_use": true,
        "vision": true,
        "multi_provider": true,
        "model_routing": true
      },
      "notes": "Proxies to multiple providers, capabilities vary by model"
    }
  },
  "capability_definitions": {
    "streaming": {
      "description": "Incremental token streaming support",
      "required_for": ["real_time_ui", "long_responses"]
    },
    "json_output": {
      "description": "Structured JSON response format",
      "required_for": ["structured_extraction", "api_responses"]
    },
    "tool_use": {
      "description": "Function/tool calling capability",
      "required_for": ["agent_systems", "external_actions"]
    },
    "vision": {
      "description": "Image understanding and processing",
      "required_for": ["multimodal_tasks", "image_analysis"]
    },
    "function_calling": {
      "description": "Native function calling support",
      "required_for": ["tool_integration", "workflow_automation"]
    },
    "structured_output": {
      "description": "Schema-constrained output generation",
      "required_for": ["data_extraction", "form_filling"]
    },
    "reasoning": {
      "description": "Enhanced reasoning capabilities",
      "required_for": ["complex_problems", "mathematical_tasks"]
    },
    "extended_thinking": {
      "description": "Extended thinking time for complex reasoning",
      "required_for": ["advanced_reasoning", "research_tasks"]
    },
    "local_execution": {
      "description": "Can run entirely locally without cloud",
      "required_for": ["privacy", "offline_usage"]
    },
    "offline_capable": {
      "description": "Works without internet connection",
      "required_for": ["disconnected_environments"]
    },
    "multimodal": {
      "description": "Multiple input modalities (text, image, audio, video)",
      "required_for": ["rich_content_processing"]
    }
  },
  "routing_strategies": {
    "cost_optimized": {
      "description": "Minimize cost while meeting capability requirements",
      "primary_metric": "cost_per_1k_tokens",
      "fallback_metric": "priority"
    },
    "performance_optimized": {
      "description": "Maximize quality and capability match",
      "primary_metric": "priority",
      "fallback_metric": "cost_per_1k_tokens"
    },
    "balanced": {
      "description": "Balance cost and performance",
      "scoring": "priority * 0.6 + (1 / cost) * 0.4"
    },
    "local_first": {
      "description": "Prefer local execution when possible",
      "filter": "local_execution == true",
      "fallback_to_cloud": true
    }
  },
  "fallback_chains": {
    "default": {
      "openai": ["deepseek", "xai", "anthropic"],
      "anthropic": ["openai", "gemini"],
      "gemini": ["anthropic", "openai"],
      "ollama": ["openai"],
      "deepseek": ["openai", "xai"],
      "xai": ["openai", "deepseek"],
      "openrouter": ["openai", "anthropic"]
    },
    "cost_sensitive": {
      "openai": ["deepseek", "gemini", "anthropic"],
      "anthropic": ["gemini", "deepseek", "openai"],
      "ollama": ["deepseek", "gemini", "openai"]
    },
    "quality_focused": {
      "openai": ["anthropic", "gemini"],
      "anthropic": ["openai", "gemini"],
      "gemini": ["anthropic", "openai"]
    }
  }
}
